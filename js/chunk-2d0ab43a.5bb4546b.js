(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{attrs:{role:"main"}},[i("div",{staticClass:"album py-5 bg-light"},[i("div",{staticClass:"container"},[i("UserProfileCard",{attrs:{profile:t.profile,"initial-profile":t.profile,isFollowed:t.isFollowed,"initial-is-followed":t.isFollowed}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("UserFollowingsCard",{attrs:{profile:t.profile,"initial-profile":t.profile}}),i("UserFollowersCard",{attrs:{profile:t.profile,"initial-profile":t.profile}})],1),i("div",{staticClass:"col-md-8"},[i("UserCommentsCard",{attrs:{profile:t.profile,"initial-profile":t.profile}}),i("UserFavoritedRestaurantCard",{attrs:{profile:t.profile,"initial-profile":t.profile}})],1)])],1)])])},a=[],s=(i("96cf"),i("1da1")),l=i("5530"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card mb-3"},[i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col-md-4"},[i("img",{attrs:{src:t._f("emptyImage")(t.profile.image),width:"300px",height:"300px"}})]),i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),i("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),i("ul",{staticClass:"list-unstyled list-inline"},[i("li",[i("strong",[t._v(t._s(t.profile.Comments?t.profile.Comments.length:"No Data"))]),t._v(" 已評論餐廳 ")]),i("li",[i("strong",[t._v(t._s(t.profile.FavoritedRestaurants?t.profile.FavoritedRestaurants.length:"No Data"))]),t._v(" 收藏的餐廳 ")]),i("li",[i("strong",[t._v(t._s(t.profile.Followers?t.profile.Followers.length:"No Data"))]),t._v(" followings (追蹤者) ")]),i("li",[i("strong",[t._v(t._s(t.profile.Followings?t.profile.Followings.length:"No Data"))]),t._v(" followers (追隨者) ")])]),t.currentUser.id===t.profile.id?i("div",{staticClass:"div"},[i("p",[t.currentUser.id===t.profile.id?i("router-link",{attrs:{to:{name:"users-edit",params:{id:t.profile.id}}}},[i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("edit")])]):t._e()],1)]):i("div",{staticClass:"div"},[i("p",[t.isFollowed?i("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollowing(t.profile.id)}}},[t._v("取消追蹤")]):i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowing(t.profile.id)}}},[t._v("追蹤")])])])])])])])},n=[],c=i("2708"),d=i("1602"),u=i("2f62"),f=i("2fa3"),p={mixins:[c["a"]],props:{initialProfile:{type:Object,require:!0},initialIsFollowed:{type:Boolean,require:!0}},data:function(){return{profile:this.initialProfile,isFollowed:this.initialIsFollowed}},computed:Object(l["a"])({},Object(u["b"])(["currentUser","isAuthenticated"])),watch:{initialProfile:function(t){this.profile=Object(l["a"])({},this.profile,{},t)},initialIsFollowed:function(t){this.isFollowed=t}},methods:{addFollowing:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d["a"].addFollowing({userId:t});case 3:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=8;break}throw new Error(s);case 8:e.isFollowed=!0,i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](0),f["a"].fire({icon:"error",title:"現在無發追蹤該使用者，請稍後再試"});case 14:case"end":return i.stop()}}),i,null,[[0,11]])})))()},deleteFollowing:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d["a"].deleteFollowing({userId:t});case 3:if(r=i.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){i.next=8;break}throw new Error(s);case 8:e.isFollowed=!1,i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](0),f["a"].fire({icon:"error",title:"現在無法解除追蹤，請稍後再試"});case 14:case"end":return i.stop()}}),i,null,[[0,11]])})))()}}},m=p,h=i("2877"),v=Object(h["a"])(m,o,n,!1,null,null,null),w=v.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.Followings?t.profile.Followings.length:"No Data"))]),t._v(" followings (追蹤者) ")]),i("div",{staticClass:"card-body"},t._l(t.profile.Followings,(function(e){return i("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[i("img",{staticClass:"avatar mr-1",attrs:{src:t._f("emptyImage")(e.image),width:"60",height:"60"}})])})),1)])},b=[],_={mixins:[c["a"]],props:{initialProfile:{type:Object,require:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(l["a"])({},this.profile,{},t)}}},C=_,F=Object(h["a"])(C,g,b,!1,null,null,null),x=F.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.Followers?t.profile.Followers.length:"No Data"))]),t._v(" followers (追隨者) ")]),i("div",{staticClass:"card-body"},t._l(t.profile.Followers,(function(e){return i("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[i("img",{staticClass:"avatar mr-1",attrs:{src:t._f("emptyImage")(e.image),width:"60",height:"60"}})])})),1)])},O=[],j={mixins:[c["a"]],props:{initialProfile:{type:Object,require:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(l["a"])({},this.profile,{},t)}}},k=j,P=Object(h["a"])(k,y,O,!1,null,null,null),U=P.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.Comments?t.profile.Comments.length:"No Data"))]),t._v(" 已評論餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.profile.Comments,(function(e){return i("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.Restaurant.id}}}},[i("img",{staticClass:"avatar mr-1",attrs:{src:t._f("emptyImage")(e.Restaurant.image),width:"60",height:"60"}})])})),1)])},D=[],I={mixins:[c["a"]],props:{initialProfile:{type:Object,require:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(l["a"])({},this.profile,{},t)}}},E=I,N=Object(h["a"])(E,R,D,!1,null,null,null),$=N.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.FavoritedRestaurants?t.profile.FavoritedRestaurants.length:"No Data"))]),t._v(" 收藏的餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.profile.FavoritedRestaurants,(function(e){return i("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}}}},[i("img",{staticClass:"avatar mr-1",attrs:{src:t._f("emptyImage")(e.image),width:"60",height:"60"}})])})),1)])},K=[],T={mixins:[c["a"]],props:{initialProfile:{type:Object,require:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(l["a"])({},this.profile,{},t)}}},A=T,J=Object(h["a"])(A,q,K,!1,null,null,null),B=J.exports,z={components:{UserProfileCard:w,UserFollowingsCard:x,UserFollowersCard:U,UserCommentsCard:$,UserFavoritedRestaurantCard:B},data:function(){return{profile:{},isFollowed:!1}},created:function(){var t=this.$route.params.id;this.fetchUser(t)},beforeRouteUpdate:function(t,e,i){var r=t.params.id;this.fetchUser(r),i()},computed:Object(l["a"])({},Object(u["b"])(["currentUser","isAuthenticated"])),methods:{fetchUser:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,a,s,l,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d["a"].get({id:t});case 3:if(r=i.sent,a=r.data,s=r.statusText,l=a.profile,o=a.isFollowed,e.profile=l,e.isFollowed=o,"OK"===s){i.next=11;break}throw new Error(s);case 11:i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](0),f["a"].fire({icon:"error",title:"現在無法取得個人資料，請稍後再試"});case 16:case"end":return i.stop()}}),i,null,[[0,13]])})))()}}},G=z,H=Object(h["a"])(G,r,a,!1,null,null,null);e["default"]=H.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.5bb4546b.js.map